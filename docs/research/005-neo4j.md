# Neo4j å›¾æ•°æ®åº“æ·±åº¦è°ƒç ”æŠ¥å‘Š

> **æŠ¥å‘Šç‰ˆæœ¬**ï¼šv1.0
> **è°ƒç ”æ—¥æœŸ**ï¼š2025-12
> **è°ƒç ”å¯¹è±¡**ï¼šNeo4j Database 2025.x / 5.x
> **è°ƒç ”èŒƒå›´**ï¼šå›¾æ•°æ®åº“æ ¸å¿ƒèƒ½åŠ›ã€Cypher æŸ¥è¯¢è¯­è¨€ã€å‘é‡æœç´¢ã€GenAI é›†æˆã€å›¾ç®—æ³•

---

## ğŸ“‹ ç›®å½•

1. [äº§å“æ¦‚è¿°ä¸å®šä½](#1-äº§å“æ¦‚è¿°ä¸å®šä½)
2. [æ ¸å¿ƒæ¶æ„ä¸æŠ€æœ¯åŸç†](#2-æ ¸å¿ƒæ¶æ„ä¸æŠ€æœ¯åŸç†)
3. [Cypher æŸ¥è¯¢è¯­è¨€](#3-cypher-æŸ¥è¯¢è¯­è¨€)
4. [æ•°æ®å»ºæ¨¡ä¸å›¾æ¨¡å¼](#4-æ•°æ®å»ºæ¨¡ä¸å›¾æ¨¡å¼)
5. [ç´¢å¼•ä¸æ€§èƒ½ä¼˜åŒ–](#5-ç´¢å¼•ä¸æ€§èƒ½ä¼˜åŒ–)
6. [é›†ç¾¤ä¸é«˜å¯ç”¨](#6-é›†ç¾¤ä¸é«˜å¯ç”¨)
7. [å‘é‡æœç´¢ä¸ GenAI](#7-å‘é‡æœç´¢ä¸-genai)
8. [å›¾æ•°æ®ç§‘å­¦ (GDS)](#8-å›¾æ•°æ®ç§‘å­¦-gds)
9. [ç”Ÿæ€é›†æˆ](#9-ç”Ÿæ€é›†æˆ)
10. [å¯è¡Œæ€§åˆ†æä¸è¯„ä¼°](#10-å¯è¡Œæ€§åˆ†æä¸è¯„ä¼°)
11. [æœ¬é¡¹ç›®é›†æˆæ–¹æ¡ˆ](#11-æœ¬é¡¹ç›®é›†æˆæ–¹æ¡ˆ)
12. [Demo å®æ–½æŒ‡å¼•](#12-demo-å®æ–½æŒ‡å¼•)
13. [References](#references)

---

## 1. äº§å“æ¦‚è¿°ä¸å®šä½

### 1.1 äº§å“ç®€ä»‹

Neo4j æ˜¯å…¨çƒé¢†å…ˆçš„**åŸç”Ÿå›¾æ•°æ®åº“**ï¼Œä¸“ä¸ºå­˜å‚¨å’ŒæŸ¥è¯¢é«˜åº¦äº’è”çš„æ•°æ®è€Œè®¾è®¡<sup>[[1]](#ref1)</sup>ã€‚å®ƒé‡‡ç”¨**å±æ€§å›¾æ¨¡å‹ï¼ˆProperty Graph Modelï¼‰**ï¼Œå°†æ•°æ®è¡¨ç¤ºä¸ºèŠ‚ç‚¹ï¼ˆNodesï¼‰ã€å…³ç³»ï¼ˆRelationshipsï¼‰å’Œå±æ€§ï¼ˆPropertiesï¼‰çš„é›†åˆï¼Œèƒ½å¤Ÿç›´è§‚åœ°æ˜ å°„ç°å®ä¸–ç•Œä¸­çš„å®ä½“å’Œå…³è”<sup>[[2]](#ref2)</sup>ã€‚

Neo4j çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå…¶**åŸç”Ÿå›¾å­˜å‚¨å’Œå¤„ç†èƒ½åŠ›**â€”â€”æ•°æ®åœ¨åº•å±‚ä»¥å›¾ç»“æ„å­˜å‚¨ï¼ŒæŸ¥è¯¢æ—¶æ— éœ€è¿›è¡Œæ˜‚è´µçš„ JOIN æ“ä½œï¼Œè€Œæ˜¯é€šè¿‡æŒ‡é’ˆç›´æ¥éå†å…³ç³»ï¼Œå®ç°**å¸¸æ•°æ—¶é—´å¤æ‚åº¦**çš„å…³ç³»æŸ¥æ‰¾<sup>[[3]](#ref3)</sup>ã€‚

### 1.2 æ ¸å¿ƒå®šä½

```mermaid
graph TB
    subgraph "Neo4j æ ¸å¿ƒèƒ½åŠ›"
        A[åŸç”Ÿå›¾æ•°æ®åº“] --> B[å±æ€§å›¾æ¨¡å‹]
        A --> C[Cypher æŸ¥è¯¢è¯­è¨€]
        A --> D[å›¾ç®—æ³•åº“ GDS]
        A --> E[å‘é‡æœç´¢]
    end

    B --> F[èŠ‚ç‚¹ + å…³ç³» + å±æ€§<br/>ç›´è§‚æ•°æ®å»ºæ¨¡]
    C --> G[å£°æ˜å¼å›¾æŸ¥è¯¢<br/>æ¨¡å¼åŒ¹é…]
    D --> H[ä¸­å¿ƒæ€§ / ç¤¾åŒºæ£€æµ‹<br/>è·¯å¾„æŸ¥æ‰¾ / åµŒå…¥]
    E --> I[HNSW ç´¢å¼•<br/>GenAI / RAG æ”¯æŒ]

    style A fill:#0066cc,color:#fff
    style B fill:#52c41a,color:#fff
    style C fill:#722ed1,color:#fff
    style D fill:#fa541c,color:#fff
    style E fill:#13c2c2,color:#fff
```

| èƒ½åŠ›ç»´åº¦     | æè¿°                         | å…¸å‹åœºæ™¯               |
| ------------ | ---------------------------- | ---------------------- |
| **å›¾å­˜å‚¨**   | åŸç”Ÿå›¾ç»“æ„å­˜å‚¨ï¼Œå…³ç³»ä¸€ç­‰å…¬æ°‘ | ç¤¾äº¤ç½‘ç»œã€çŸ¥è¯†å›¾è°±     |
| **å›¾æŸ¥è¯¢**   | Cypher å£°æ˜å¼æŸ¥è¯¢è¯­è¨€        | å¤æ‚å…³ç³»æŸ¥è¯¢ã€è·¯å¾„åˆ†æ |
| **å›¾ç®—æ³•**   | 50+ å›¾åˆ†æç®—æ³•ï¼ˆGDS åº“ï¼‰     | æ¨èç³»ç»Ÿã€æ¬ºè¯ˆæ£€æµ‹     |
| **å‘é‡æœç´¢** | HNSW å‘é‡ç´¢å¼•ï¼Œæœ€é«˜ 4096 ç»´  | RAGã€è¯­ä¹‰æœç´¢          |

### 1.3 ç‰ˆæœ¬æ¼”è¿›

| ç‰ˆæœ¬             | å‘å¸ƒæ—¶é—´ | é‡è¦ç‰¹æ€§                  |
| ---------------- | -------- | ------------------------- |
| Neo4j 4.x        | 2020     | å¤šæ•°æ®åº“ã€Fabric è”é‚¦æŸ¥è¯¢ |
| Neo4j 5.0        | 2022     | å…¨æ–°æ¶æ„ã€æ”¹è¿›çš„é›†ç¾¤      |
| Neo4j 5.13+      | 2024     | å‘é‡ç´¢å¼•åŸç”Ÿæ”¯æŒ          |
| **Neo4j 2025.x** | 2025     | Cypher 25ã€æ—¥å†ç‰ˆæœ¬å‘½å   |

### 1.4 äº§å“ç‰ˆæœ¬å¯¹æ¯”

| åŠŸèƒ½          | Community Edition | Enterprise Edition | Aura (äº‘æœåŠ¡) |
| ------------- | ----------------- | ------------------ | ------------- |
| **å¼€æºåè®®**  | GPL v3            | å•†ä¸šæˆæƒ           | SaaS          |
| **é›†ç¾¤**      | âŒ                | âœ…                 | âœ…            |
| **é«˜å¯ç”¨**    | âŒ                | âœ…                 | âœ…            |
| **RBAC æƒé™** | åŸºç¡€              | å®Œæ•´               | å®Œæ•´          |
| **å‘é‡ç´¢å¼•**  | âœ…                | âœ…                 | âœ…            |
| **GDS ç®—æ³•**  | ç¤¾åŒºç‰ˆ            | ä¼ä¸šç‰ˆ             | âœ…            |
| **å¹¶å‘é™åˆ¶**  | 4 æ ¸              | æ— é™åˆ¶             | æŒ‰é…ç½®        |

---

## 2. æ ¸å¿ƒæ¶æ„ä¸æŠ€æœ¯åŸç†

### 2.1 å±æ€§å›¾æ¨¡å‹

Neo4j é‡‡ç”¨**å±æ€§å›¾æ¨¡å‹**ï¼Œè¿™æ˜¯å›¾æ•°æ®åº“é¢†åŸŸæœ€å¹¿æ³›ä½¿ç”¨çš„æ•°æ®æ¨¡å‹<sup>[[2]](#ref2)</sup><sup>[[4]](#ref4)</sup>ï¼š

```mermaid
graph LR
    subgraph "å±æ€§å›¾ç¤ºä¾‹"
        P1[ğŸ‘¤ Person<br/>name: 'Alice'<br/>age: 30]
        P2[ğŸ‘¤ Person<br/>name: 'Bob'<br/>age: 25]
        M1[ğŸ¬ Movie<br/>title: 'Matrix'<br/>year: 1999]
    end

    P1 -->|KNOWS<br/>since: 2020| P2
    P1 -->|ACTED_IN<br/>role: 'Neo'| M1
    P2 -->|DIRECTED| M1

    style P1 fill:#1890ff,color:#fff
    style P2 fill:#1890ff,color:#fff
    style M1 fill:#52c41a,color:#fff
```

#### æ ¸å¿ƒæ¦‚å¿µ

| æ¦‚å¿µ                    | æè¿°                       | ç¤ºä¾‹                        |
| ----------------------- | -------------------------- | --------------------------- |
| **èŠ‚ç‚¹ (Node)**         | å®ä½“ï¼Œå¯æœ‰æ ‡ç­¾å’Œå±æ€§       | `(:Person {name: 'Alice'})` |
| **å…³ç³» (Relationship)** | æœ‰å‘è¿æ¥ï¼Œå¿…æœ‰ç±»å‹å’Œæ–¹å‘   | `-[:KNOWS {since: 2020}]->` |
| **æ ‡ç­¾ (Label)**        | èŠ‚ç‚¹åˆ†ç±»ï¼Œæ”¯æŒå¤šæ ‡ç­¾       | `:Person`, `:Employee`      |
| **å±æ€§ (Property)**     | é”®å€¼å¯¹ï¼Œå­˜å‚¨åœ¨èŠ‚ç‚¹æˆ–å…³ç³»ä¸Š | `name: 'Alice'`             |

### 2.2 å­˜å‚¨æ¶æ„

Neo4j é‡‡ç”¨**åŸç”Ÿå›¾å­˜å‚¨å¼•æ“**ï¼Œæ•°æ®ä»¥å›¾ç»“æ„ç›´æ¥å­˜å‚¨åœ¨ç£ç›˜ä¸Š<sup>[[3]](#ref3)</sup><sup>[[5]](#ref5)</sup>ï¼š

```mermaid
graph TB
    subgraph "å­˜å‚¨å±‚æ¶æ„"
        NS[Node Store<br/>èŠ‚ç‚¹å­˜å‚¨]
        RS[Relationship Store<br/>å…³ç³»å­˜å‚¨]
        PS[Property Store<br/>å±æ€§å­˜å‚¨]
        LS[Label Store<br/>æ ‡ç­¾å­˜å‚¨]
    end

    subgraph "ç´¢å¼•å±‚"
        RI[Range Index<br/>èŒƒå›´ç´¢å¼•]
        TI[Text Index<br/>æ–‡æœ¬ç´¢å¼•]
        VI[Vector Index<br/>å‘é‡ç´¢å¼•]
        FTI[Full-text Index<br/>å…¨æ–‡ç´¢å¼•]
    end

    subgraph "ç¼“å­˜å±‚"
        PC[Page Cache<br/>é¡µé¢ç¼“å­˜]
    end

    NS <--> RS
    NS --> PS
    RS --> PS
    NS --> LS

    PC --> NS & RS & PS

    style PC fill:#fa541c,color:#fff
    style VI fill:#13c2c2,color:#fff
```

#### å­˜å‚¨ç‰¹æ€§

| ç‰¹æ€§                     | æè¿°                                     |
| ------------------------ | ---------------------------------------- |
| **å›ºå®šå¤§å°è®°å½•**         | èŠ‚ç‚¹/å…³ç³»ä½¿ç”¨å›ºå®šå¤§å°è®°å½•ï¼ŒO(1) éšæœºè®¿é—® |
| **åŒå‘é“¾è¡¨**             | å…³ç³»å­˜å‚¨ä¸ºåŒå‘é“¾è¡¨ï¼Œæ”¯æŒåŒå‘éå†         |
| **Property Chain**       | å±æ€§ä»¥é“¾å¼ç»“æ„å­˜å‚¨ï¼Œæ”¯æŒåŠ¨æ€å±æ€§         |
| **Index-free Adjacency** | æ— éœ€ç´¢å¼•å³å¯éå†é‚»æ¥èŠ‚ç‚¹                 |

### 2.3 äº‹åŠ¡ä¸ ACID

Neo4j å®Œå…¨æ”¯æŒ **ACID äº‹åŠ¡**<sup>[[5]](#ref5)</sup>ï¼š

| ACID å±æ€§  | Neo4j å®ç°                             |
| ---------- | -------------------------------------- |
| **åŸå­æ€§** | äº‹åŠ¡å…¨éƒ¨æˆåŠŸæˆ–å…¨éƒ¨å›æ»š                 |
| **ä¸€è‡´æ€§** | çº¦æŸåœ¨äº‹åŠ¡æäº¤æ—¶å¼ºåˆ¶æ‰§è¡Œ               |
| **éš”ç¦»æ€§** | é»˜è®¤ Read-Committedï¼Œæ”¯æŒ Serializable |
| **æŒä¹…æ€§** | äº‹åŠ¡æ—¥å¿— + æ£€æŸ¥ç‚¹æœºåˆ¶                  |

```cypher
// äº‹åŠ¡ç¤ºä¾‹
BEGIN
CREATE (p:Person {name: 'Alice'})
CREATE (m:Movie {title: 'Matrix'})
CREATE (p)-[:ACTED_IN]->(m)
COMMIT
```

---

## 3. Cypher æŸ¥è¯¢è¯­è¨€

### 3.1 è¯­è¨€æ¦‚è¿°

**Cypher** æ˜¯ Neo4j çš„å£°æ˜å¼å›¾æŸ¥è¯¢è¯­è¨€ï¼Œè®¾è®¡çµæ„Ÿæ¥æºäº SQLã€SPARQL å’Œæ¨¡å¼åŒ¹é…<sup>[[6]](#ref6)</sup><sup>[[7]](#ref7)</sup>ã€‚å…¶æ ¸å¿ƒç‰¹ç‚¹æ˜¯ä½¿ç”¨ **ASCII Art** è¯­æ³•ç›´è§‚è¡¨è¾¾å›¾æ¨¡å¼ï¼š

```
(node)-[relationship]->(node)
```

### 3.2 æ ¸å¿ƒè¯­æ³•

#### èŠ‚ç‚¹ä¸å…³ç³»æ¨¡å¼

```cypher
// èŠ‚ç‚¹æ¨¡å¼
(p:Person {name: 'Alice'})

// å…³ç³»æ¨¡å¼
-[:KNOWS]->           // æœ‰å‘å…³ç³»
-[:KNOWS]-            // æ— å‘å…³ç³»
-[:KNOWS*1..3]->      // å¯å˜é•¿åº¦è·¯å¾„ (1-3 è·³)

// å®Œæ•´è·¯å¾„æ¨¡å¼
(a:Person)-[:KNOWS]->(b:Person)-[:WORKS_AT]->(c:Company)
```

#### åŸºæœ¬æŸ¥è¯¢æ“ä½œ

| å­å¥     | ç”¨é€”          | ç¤ºä¾‹                              |
| -------- | ------------- | --------------------------------- |
| `MATCH`  | æ¨¡å¼åŒ¹é…      | `MATCH (p:Person) RETURN p`       |
| `WHERE`  | æ¡ä»¶è¿‡æ»¤      | `WHERE p.age > 30`                |
| `CREATE` | åˆ›å»ºèŠ‚ç‚¹/å…³ç³» | `CREATE (p:Person {name: 'Bob'})` |
| `MERGE`  | åŒ¹é…æˆ–åˆ›å»º    | `MERGE (p:Person {id: 1})`        |
| `SET`    | æ›´æ–°å±æ€§      | `SET p.age = 31`                  |
| `DELETE` | åˆ é™¤èŠ‚ç‚¹/å…³ç³» | `DELETE p`                        |
| `RETURN` | è¿”å›ç»“æœ      | `RETURN p.name, p.age`            |

#### æŸ¥è¯¢ç¤ºä¾‹

```cypher
// æŸ¥æ‰¾ Alice çš„æœ‹å‹
MATCH (alice:Person {name: 'Alice'})-[:KNOWS]->(friend:Person)
RETURN friend.name AS friendName

// æŸ¥æ‰¾ä¸¤äººä¹‹é—´çš„æœ€çŸ­è·¯å¾„
MATCH path = shortestPath(
  (alice:Person {name: 'Alice'})-[:KNOWS*]-(bob:Person {name: 'Bob'})
)
RETURN path

// æœ‹å‹çš„æœ‹å‹æ¨èï¼ˆæ’é™¤å·²è®¤è¯†çš„äººï¼‰
MATCH (me:Person {name: 'Alice'})-[:KNOWS]->(friend)-[:KNOWS]->(foaf)
WHERE NOT (me)-[:KNOWS]->(foaf) AND me <> foaf
RETURN foaf.name, count(*) AS mutualFriends
ORDER BY mutualFriends DESC
LIMIT 10
```

### 3.3 Cypher 25 æ–°ç‰¹æ€§

Neo4j 2025.06 å¼•å…¥äº† **Cypher 25** ç‰ˆæœ¬<sup>[[1]](#ref1)</sup>ï¼š

| æ–°ç‰¹æ€§             | æè¿°                   |
| ------------------ | ---------------------- |
| **GQL å…¼å®¹**       | ä¸ ISO GQL æ ‡å‡†å¯¹é½    |
| **æ”¹è¿›çš„ç±»å‹ç³»ç»Ÿ** | æ›´ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥       |
| **æ–°å‡½æ•°å’Œæ“ä½œç¬¦** | å¢å¼ºçš„å­—ç¬¦ä¸²ã€åˆ—è¡¨æ“ä½œ |

```cypher
// æŒ‡å®š Cypher ç‰ˆæœ¬
CYPHER 25
MATCH (p:Person)
RETURN p.name
```

---

## 4. æ•°æ®å»ºæ¨¡ä¸å›¾æ¨¡å¼

### 4.1 å»ºæ¨¡åŸåˆ™

Neo4j çš„æ•°æ®å»ºæ¨¡éµå¾ª**é¢†åŸŸé©±åŠ¨è®¾è®¡**åŸåˆ™<sup>[[8]](#ref8)</sup>ï¼š

```mermaid
graph TB
    subgraph "å»ºæ¨¡æµç¨‹"
        D[é¢†åŸŸç†è§£] --> E[è¯†åˆ«å®ä½“]
        E --> R[è¯†åˆ«å…³ç³»]
        R --> P[å®šä¹‰å±æ€§]
        P --> O[ä¼˜åŒ–æŸ¥è¯¢]
    end

    style D fill:#1890ff,color:#fff
    style O fill:#52c41a,color:#fff
```

#### å»ºæ¨¡æœ€ä½³å®è·µ

| åŸåˆ™              | æè¿°                 | ç¤ºä¾‹             |
| ----------------- | -------------------- | ---------------- |
| **å®ä½“ â†’ èŠ‚ç‚¹**   | ç‹¬ç«‹æ¦‚å¿µå»ºæ¨¡ä¸ºèŠ‚ç‚¹   | Person, Product  |
| **åŠ¨è¯ â†’ å…³ç³»**   | å®ä½“é—´åŠ¨ä½œå»ºæ¨¡ä¸ºå…³ç³» | PURCHASED, KNOWS |
| **å½¢å®¹è¯ â†’ å±æ€§** | æè¿°æ€§ä¿¡æ¯ä½œä¸ºå±æ€§   | age, createdAt   |
| **å¤šæ ‡ç­¾åˆ†ç±»**    | åˆ©ç”¨å¤šæ ‡ç­¾å®ç°ç»§æ‰¿   | :Person:Employee |

### 4.2 å¸¸è§å›¾æ¨¡å¼

```mermaid
graph LR
    subgraph "ç¤¾äº¤ç½‘ç»œæ¨¡å¼"
        U1[User] -->|FOLLOWS| U2[User]
        U1 -->|POSTED| P[Post]
        U2 -->|LIKED| P
    end
```

```mermaid
graph LR
    subgraph "çŸ¥è¯†å›¾è°±æ¨¡å¼"
        E1[Entity] -->|RELATES_TO| E2[Entity]
        E1 -->|HAS_ATTRIBUTE| A[Attribute]
        E1 -->|BELONGS_TO| C[Category]
    end
```

---

## 5. ç´¢å¼•ä¸æ€§èƒ½ä¼˜åŒ–

### 5.1 ç´¢å¼•ç±»å‹

Neo4j æ”¯æŒå¤šç§ç´¢å¼•ç±»å‹<sup>[[9]](#ref9)</sup><sup>[[10]](#ref10)</sup>ï¼š

| ç´¢å¼•ç±»å‹            | ç”¨é€”                | é€‚ç”¨åœºæ™¯         |
| ------------------- | ------------------- | ---------------- |
| **Range Index**     | ç²¾ç¡®åŒ¹é…ã€èŒƒå›´æŸ¥è¯¢  | æ•°å€¼ã€å­—ç¬¦ä¸²å±æ€§ |
| **Text Index**      | å­—ç¬¦ä¸²å‰ç¼€/åŒ…å«æŸ¥è¯¢ | æ¨¡ç³Šæœç´¢         |
| **Point Index**     | åœ°ç†ç©ºé—´æŸ¥è¯¢        | ä½ç½®æ•°æ®         |
| **Full-text Index** | å…¨æ–‡æœç´¢ï¼ˆLuceneï¼‰  | æ–‡æ¡£æ£€ç´¢         |
| **Vector Index**    | å‘é‡ç›¸ä¼¼åº¦æœç´¢      | RAGã€è¯­ä¹‰æœç´¢    |
| **Token Lookup**    | æ ‡ç­¾/ç±»å‹å¿«é€ŸæŸ¥æ‰¾   | èŠ‚ç‚¹/å…³ç³»ç±»å‹    |

#### åˆ›å»ºç´¢å¼•

```cypher
// Range Index
CREATE INDEX person_name FOR (p:Person) ON (p.name)

// Composite Index
CREATE INDEX person_name_age FOR (p:Person) ON (p.name, p.age)

// Full-text Index
CREATE FULLTEXT INDEX movie_search FOR (m:Movie) ON EACH [m.title, m.plot]

// Vector Index (4096 ç»´)
CREATE VECTOR INDEX doc_embedding FOR (d:Document) ON (d.embedding)
OPTIONS {
  indexConfig: {
    `vector.dimensions`: 1536,
    `vector.similarity_function`: 'cosine'
  }
}
```

### 5.2 çº¦æŸ

Neo4j æ”¯æŒå¤šç§çº¦æŸç¡®ä¿æ•°æ®å®Œæ•´æ€§<sup>[[11]](#ref11)</sup>ï¼š

```cypher
// å”¯ä¸€æ€§çº¦æŸ
CREATE CONSTRAINT person_id_unique FOR (p:Person) REQUIRE p.id IS UNIQUE

// å­˜åœ¨æ€§çº¦æŸ (Enterprise)
CREATE CONSTRAINT person_name_exists FOR (p:Person) REQUIRE p.name IS NOT NULL

// ç±»å‹çº¦æŸ (Enterprise)
CREATE CONSTRAINT person_age_type FOR (p:Person) REQUIRE p.age IS :: INTEGER

// Key çº¦æŸ (Enterprise)
CREATE CONSTRAINT person_key FOR (p:Person) REQUIRE (p.id, p.email) IS NODE KEY
```

### 5.3 æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

| ç­–ç•¥                | æè¿°                     |
| ------------------- | ------------------------ |
| **Profile/Explain** | åˆ†ææŸ¥è¯¢æ‰§è¡Œè®¡åˆ’         |
| **ç´¢å¼•ä¼˜åŒ–**        | ä¸ºé¢‘ç¹æŸ¥è¯¢å±æ€§åˆ›å»ºç´¢å¼•   |
| **å‚æ•°åŒ–æŸ¥è¯¢**      | ä½¿ç”¨å‚æ•°é¿å…æŸ¥è¯¢ç¼–è¯‘å¼€é”€ |
| **æ‰¹é‡æ“ä½œ**        | ä½¿ç”¨ `UNWIND` æ‰¹é‡å¤„ç†   |
| **å†…å­˜é…ç½®**        | é€‚å½“é…ç½® Page Cache      |

```cypher
// æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’
EXPLAIN MATCH (p:Person {name: 'Alice'}) RETURN p

// è¯¦ç»†æ‰§è¡Œç»Ÿè®¡
PROFILE MATCH (p:Person {name: 'Alice'}) RETURN p
```

---

## 6. é›†ç¾¤ä¸é«˜å¯ç”¨

### 6.1 é›†ç¾¤æ¶æ„

Neo4j Enterprise æ”¯æŒ**ä¸»ä»å¤åˆ¶é›†ç¾¤**æ¶æ„<sup>[[12]](#ref12)</sup>ï¼š

```mermaid
graph TB
    subgraph "Neo4j Cluster"
        P[Primary<br/>è¯»å†™]
        S1[Secondary 1<br/>åªè¯»]
        S2[Secondary 2<br/>åªè¯»]
        S3[Secondary 3<br/>åªè¯»]
    end

    C[Client] --> LB[Load Balancer]
    LB --> P
    LB --> S1 & S2 & S3

    P -.->|Raft å¤åˆ¶| S1 & S2 & S3

    style P fill:#fa541c,color:#fff
    style S1 fill:#1890ff,color:#fff
    style S2 fill:#1890ff,color:#fff
    style S3 fill:#1890ff,color:#fff
```

### 6.2 é›†ç¾¤ç‰¹æ€§

| ç‰¹æ€§             | æè¿°                                   |
| ---------------- | -------------------------------------- |
| **Raft åè®®**    | å…±è¯†ç®—æ³•ï¼Œä¿è¯æ•°æ®ä¸€è‡´æ€§               |
| **è‡ªåŠ¨æ•…éšœè½¬ç§»** | Primary æ•…éšœæ—¶è‡ªåŠ¨é€‰ä¸¾æ–° Primary       |
| **è¯»å†™åˆ†ç¦»**     | å†™å…¥åˆ° Primaryï¼Œè¯»å–å¯åˆ†å‘åˆ° Secondary |
| **åœ¨çº¿æ‰©å®¹**     | åŠ¨æ€æ·»åŠ /ç§»é™¤é›†ç¾¤æˆå‘˜                  |

### 6.3 å¤‡ä»½ä¸æ¢å¤

```bash
# åœ¨çº¿å¤‡ä»½ (Enterprise)
neo4j-admin database backup --database=neo4j --to-path=/backup/

# ç¦»çº¿å¤‡ä»½ (Community)
neo4j-admin database dump --database=neo4j --to-path=/backup/neo4j.dump

# æ¢å¤æ•°æ®åº“
neo4j-admin database restore --database=neo4j --from-path=/backup/
```

---

## 7. å‘é‡æœç´¢ä¸ GenAI

### 7.1 å‘é‡ç´¢å¼•æ¦‚è¿°

Neo4j ä» 5.13 ç‰ˆæœ¬å¼€å§‹åŸç”Ÿæ”¯æŒ**å‘é‡ç´¢å¼•**ï¼Œç”¨äºé«˜æ•ˆçš„è¯­ä¹‰ç›¸ä¼¼åº¦æœç´¢<sup>[[13]](#ref13)</sup><sup>[[14]](#ref14)</sup>ï¼š

```mermaid
graph LR
    subgraph "å‘é‡æœç´¢æµç¨‹"
        D[æ–‡æ¡£/æ•°æ®] --> E[Embedding æ¨¡å‹]
        E --> V[å‘é‡ 1536 ç»´]
        V --> I[HNSW ç´¢å¼•]
        I --> S[Top-K ç›¸ä¼¼æœç´¢]
    end

    style V fill:#13c2c2,color:#fff
    style I fill:#fa541c,color:#fff
```

### 7.2 HNSW ç®—æ³•

Neo4j ä½¿ç”¨ **HNSWï¼ˆHierarchical Navigable Small Worldï¼‰** ç®—æ³•å®ç°è¿‘ä¼¼æœ€è¿‘é‚»æœç´¢<sup>[[14]](#ref14)</sup>ï¼š

| å‚æ•°                          | æè¿°                  | é»˜è®¤å€¼ |
| ----------------------------- | --------------------- | ------ |
| `vector.dimensions`           | å‘é‡ç»´åº¦ï¼ˆæœ€å¤§ 4096ï¼‰ | -      |
| `vector.similarity_function`  | ç›¸ä¼¼åº¦å‡½æ•°            | cosine |
| `vector.hnsw.m`               | æ¯å±‚æœ€å¤§è¿æ¥æ•°        | 16     |
| `vector.hnsw.ef_construction` | æ„å»ºæ—¶æœç´¢å®½åº¦        | 100    |

### 7.3 å‘é‡æ“ä½œ

```cypher
// åˆ›å»ºå‘é‡ç´¢å¼•
CREATE VECTOR INDEX movie_plots FOR (m:Movie) ON (m.plotEmbedding)
OPTIONS {
  indexConfig: {
    `vector.dimensions`: 1536,
    `vector.similarity_function`: 'cosine'
  }
}

// å­˜å‚¨å‘é‡
MATCH (m:Movie {title: 'Matrix'})
SET m.plotEmbedding = $embedding  // 1536 ç»´å‘é‡

// å‘é‡ç›¸ä¼¼åº¦æœç´¢
CALL db.index.vector.queryNodes('movie_plots', 10, $queryVector)
YIELD node, score
RETURN node.title, score
ORDER BY score DESC

// æ··åˆæŸ¥è¯¢ï¼šå‘é‡ + å›¾éå†
CALL db.index.vector.queryNodes('movie_plots', 10, $queryVector)
YIELD node AS movie, score
MATCH (movie)<-[:ACTED_IN]-(actor:Person)
RETURN movie.title, score, collect(actor.name) AS actors
```

### 7.4 GenAI å‡½æ•°

Neo4j æä¾›å†…ç½®çš„ GenAI å‡½æ•°<sup>[[15]](#ref15)</sup>ï¼š

```cypher
// ç”ŸæˆåµŒå…¥å‘é‡
CALL genai.vector.encode('This is a sample text', 'OpenAI', {
  token: $apiKey,
  model: 'text-embedding-3-small'
}) YIELD vector
RETURN vector

// æ‰¹é‡ç”ŸæˆåµŒå…¥
UNWIND $texts AS text
CALL genai.vector.encode(text, 'OpenAI', {token: $apiKey})
YIELD vector
RETURN text, vector
```

---

## 8. å›¾æ•°æ®ç§‘å­¦ (GDS)

### 8.1 GDS åº“æ¦‚è¿°

**Neo4j Graph Data Science (GDS)** æ˜¯ä¸€ä¸ªæä¾› 50+ å›¾ç®—æ³•çš„åº“<sup>[[16]](#ref16)</sup>ï¼š

```mermaid
mindmap
  root((GDS ç®—æ³•åº“))
    ä¸­å¿ƒæ€§ç®—æ³•
      PageRank
      Betweenness
      Degree
      Closeness
    ç¤¾åŒºæ£€æµ‹
      Louvain
      Label Propagation
      Weakly Connected
      Triangle Count
    ç›¸ä¼¼æ€§ç®—æ³•
      Node Similarity
      K-Nearest Neighbors
    è·¯å¾„æŸ¥æ‰¾
      Shortest Path
      All Pairs Shortest Path
      A* ç®—æ³•
    èŠ‚ç‚¹åµŒå…¥
      FastRP
      Node2Vec
      GraphSAGE
```

### 8.2 GDS å·¥ä½œæµ

```cypher
// 1. æŠ•å½±å›¾åˆ°å†…å­˜
CALL gds.graph.project('socialGraph', 'Person', 'KNOWS')

// 2. è¿è¡Œ PageRank ç®—æ³•
CALL gds.pageRank.stream('socialGraph')
YIELD nodeId, score
RETURN gds.util.asNode(nodeId).name AS name, score
ORDER BY score DESC
LIMIT 10

// 3. æ¸…ç†æŠ•å½±
CALL gds.graph.drop('socialGraph')
```

### 8.3 å¸¸ç”¨ç®—æ³•ç¤ºä¾‹

```cypher
// ç¤¾åŒºæ£€æµ‹ - Louvain
CALL gds.louvain.stream('socialGraph')
YIELD nodeId, communityId
RETURN gds.util.asNode(nodeId).name, communityId

// èŠ‚ç‚¹ç›¸ä¼¼æ€§
CALL gds.nodeSimilarity.stream('productGraph')
YIELD node1, node2, similarity
RETURN gds.util.asNode(node1).name,
       gds.util.asNode(node2).name,
       similarity
ORDER BY similarity DESC

// èŠ‚ç‚¹åµŒå…¥ - FastRP
CALL gds.fastRP.stream('socialGraph', {embeddingDimension: 128})
YIELD nodeId, embedding
MATCH (n) WHERE id(n) = nodeId
SET n.embedding = embedding
```

---

## 9. ç”Ÿæ€é›†æˆ

### 9.1 LangChain é›†æˆ

Neo4j æä¾›å®˜æ–¹ LangChain é›†æˆ<sup>[[17]](#ref17)</sup>ï¼š

```python
from langchain_neo4j import Neo4jGraph, Neo4jVector
from langchain_openai import OpenAIEmbeddings

# è¿æ¥ Neo4j
graph = Neo4jGraph(
    url="bolt://localhost:7687",
    username="neo4j",
    password="password"
)

# å‘é‡å­˜å‚¨
embeddings = OpenAIEmbeddings()
vector_store = Neo4jVector.from_documents(
    documents,
    embeddings,
    url="bolt://localhost:7687",
    username="neo4j",
    password="password"
)

# ç›¸ä¼¼æ€§æœç´¢
results = vector_store.similarity_search("AI agents", k=5)

# GraphCypherQA Chain
from langchain_neo4j import GraphCypherQAChain
chain = GraphCypherQAChain.from_llm(llm, graph=graph)
response = chain.invoke({"query": "è°å¯¼æ¼”äº† Matrix?"})
```

### 9.2 LlamaIndex é›†æˆ

Neo4j ä¸ LlamaIndex çš„é›†æˆ<sup>[[18]](#ref18)</sup>ï¼š

```python
from llama_index.graph_stores.neo4j import Neo4jPropertyGraphStore
from llama_index.core import PropertyGraphIndex

# åˆ›å»ºå›¾å­˜å‚¨
graph_store = Neo4jPropertyGraphStore(
    username="neo4j",
    password="password",
    url="bolt://localhost:7687"
)

# åˆ›å»ºç´¢å¼•
index = PropertyGraphIndex.from_documents(
    documents,
    property_graph_store=graph_store,
    embed_model=embed_model
)

# æŸ¥è¯¢
query_engine = index.as_query_engine()
response = query_engine.query("ä»€ä¹ˆæ˜¯çŸ¥è¯†å›¾è°±?")
```

### 9.3 GraphRAG Python

Neo4j å®˜æ–¹ GraphRAG åº“<sup>[[19]](#ref19)</sup>ï¼š

```python
from neo4j_graphrag.retrievers import VectorRetriever
from neo4j_graphrag.generation import GraphRAG

# åˆ›å»ºæ£€ç´¢å™¨
retriever = VectorRetriever(
    driver=driver,
    index_name="document_embeddings",
    embedder=embedder
)

# åˆ›å»º GraphRAG ç®¡é“
rag = GraphRAG(retriever=retriever, llm=llm)
response = rag.search("AI agents çš„æ ¸å¿ƒç»„ä»¶æ˜¯ä»€ä¹ˆ?")
```

### 9.4 é©±åŠ¨ç¨‹åºæ”¯æŒ

| è¯­è¨€           | é©±åŠ¨              | å®‰è£…                                      |
| -------------- | ----------------- | ----------------------------------------- |
| **Python**     | neo4j (å®˜æ–¹)      | `pip install neo4j`                       |
| **JavaScript** | neo4j-driver      | `npm install neo4j-driver`                |
| **Java**       | neo4j-java-driver | Maven/Gradle                              |
| **Go**         | neo4j-go-driver   | `go get github.com/neo4j/neo4j-go-driver` |
| **.NET**       | Neo4j.Driver      | NuGet                                     |

### 9.5 APOC æ‰©å±•åº“

**APOC (Awesome Procedures on Cypher)** æä¾› 450+ æ‰©å±•è¿‡ç¨‹<sup>[[20]](#ref20)</sup>ï¼š

| ç±»åˆ«         | åŠŸèƒ½                     |
| ------------ | ------------------------ |
| **å¯¼å…¥å¯¼å‡º** | JSON, CSV, GraphML, JDBC |
| **å›¾é‡æ„**   | èŠ‚ç‚¹åˆå¹¶ã€å…³ç³»é‡æ„       |
| **æ•°æ®è½¬æ¢** | æ—¥æœŸå¤„ç†ã€å­—ç¬¦ä¸²æ“ä½œ     |
| **è§¦å‘å™¨**   | æ•°æ®å˜æ›´è§¦å‘æ“ä½œ         |
| **å…ƒæ•°æ®**   | Schema æ£€æŸ¥ã€ç»Ÿè®¡ä¿¡æ¯    |

```cypher
// å¯¼å…¥ JSON
CALL apoc.load.json('https://api.example.com/data')
YIELD value
CREATE (n:Data) SET n = value

// æ‰¹é‡åˆ›å»ºå…³ç³»
CALL apoc.periodic.iterate(
  'MATCH (a:Person), (b:Person) WHERE a.city = b.city RETURN a, b',
  'CREATE (a)-[:LIVES_NEAR]->(b)',
  {batchSize: 1000}
)
```

---

## 10. å¯è¡Œæ€§åˆ†æä¸è¯„ä¼°

### 10.1 æŠ€æœ¯å¯è¡Œæ€§

| è¯„ä¼°ç»´åº¦       | è¯„åˆ†  | è¯´æ˜                          |
| -------------- | ----- | ----------------------------- |
| **å›¾æ•°æ®èƒ½åŠ›** | â˜…â˜…â˜…â˜…â˜… | åŸç”Ÿå›¾å­˜å‚¨ï¼Œå…³ç³»éå† O(1)     |
| **æŸ¥è¯¢èƒ½åŠ›**   | â˜…â˜…â˜…â˜…â˜… | Cypher è¡¨è¾¾åŠ›å¼ºï¼Œæ˜“å­¦ä¹        |
| **å‘é‡æœç´¢**   | â˜…â˜…â˜…â˜…â˜† | HNSW ç´¢å¼•ï¼Œæœ€é«˜ 4096 ç»´       |
| **GenAI é›†æˆ** | â˜…â˜…â˜…â˜…â˜… | LangChain/LlamaIndex å®˜æ–¹æ”¯æŒ |
| **å›¾ç®—æ³•**     | â˜…â˜…â˜…â˜…â˜… | GDS 50+ ç®—æ³•ï¼Œè¦†ç›–å…¨é¢        |
| **ç”Ÿæ€æˆç†Ÿåº¦** | â˜…â˜…â˜…â˜…â˜… | ç¤¾åŒºæ´»è·ƒï¼Œæ–‡æ¡£å®Œå–„            |
| **è¿ç»´å¤æ‚åº¦** | â˜…â˜…â˜…â˜…â˜† | å•æœºç®€å•ï¼Œé›†ç¾¤éœ€ä¸“ä¸šè¿ç»´      |

### 10.2 é€‚ç”¨åœºæ™¯åˆ†æ

| åœºæ™¯          | é€‚åˆåº¦      | è¯´æ˜                     |
| ------------- | ----------- | ------------------------ |
| **çŸ¥è¯†å›¾è°±**  | âœ… éå¸¸é€‚åˆ | åŸç”Ÿå›¾æ¨¡å‹ï¼Œå…³ç³»è¡¨è¾¾è‡ªç„¶ |
| **RAG åº”ç”¨**  | âœ… éå¸¸é€‚åˆ | å‘é‡ + å›¾ç»“æ„ç»“åˆ        |
| **ç¤¾äº¤ç½‘ç»œ**  | âœ… éå¸¸é€‚åˆ | å…³ç³»éå†é«˜æ•ˆ             |
| **æ¨èç³»ç»Ÿ**  | âœ… éå¸¸é€‚åˆ | ååŒè¿‡æ»¤ã€å›¾ç®—æ³•         |
| **æ¬ºè¯ˆæ£€æµ‹**  | âœ… éå¸¸é€‚åˆ | æ¨¡å¼åŒ¹é…ã€ç¤¾åŒºæ£€æµ‹       |
| **OLAP åˆ†æ** | âš ï¸ ä¸€èˆ¬     | éä¸»è¦è®¾è®¡ç›®æ ‡           |
| **æµ·é‡äº‹åŠ¡**  | âš ï¸ ä¸€èˆ¬     | éœ€è¯„ä¼°å…·ä½“è´Ÿè½½           |

### 10.3 ä¸ OceanBase å¯¹æ¯”

| ç»´åº¦         | Neo4j             | OceanBase              |
| ------------ | ----------------- | ---------------------- |
| **æ•°æ®æ¨¡å‹** | å±æ€§å›¾            | å…³ç³»å‹ + å‘é‡          |
| **æŸ¥è¯¢è¯­è¨€** | Cypher            | SQL                    |
| **å…³ç³»å¤„ç†** | âœ… åŸç”Ÿå›¾éå†     | JOIN æ“ä½œ              |
| **å‘é‡æœç´¢** | âœ… HNSW (4096 ç»´) | âœ… HNSW/IVF (16000 ç»´) |
| **äº‹åŠ¡èƒ½åŠ›** | ACID              | é‡‘èçº§ ACID            |
| **åˆ†å¸ƒå¼**   | ä¼ä¸šç‰ˆé›†ç¾¤        | åŸç”Ÿåˆ†å¸ƒå¼             |
| **é€‚ç”¨åœºæ™¯** | å›¾å¯†é›†å‹          | TP/AP/Vector ä¸‰ä½ä¸€ä½“  |

### 10.4 æˆæœ¬åˆ†æ

| éƒ¨ç½²æ¨¡å¼               | æˆæœ¬é¢„ä¼°  | é€‚ç”¨åœºæ™¯           |
| ---------------------- | --------- | ------------------ |
| **Community Edition**  | å…è´¹      | å¼€å‘æµ‹è¯•ã€å°å‹é¡¹ç›® |
| **Aura Free**          | å…è´¹      | å­¦ä¹ ã€åŸå‹éªŒè¯     |
| **Aura Professional**  | ~$65/æœˆèµ· | ç”Ÿäº§ç¯å¢ƒå…¥é—¨       |
| **Enterprise Edition** | å•†ä¸šæˆæƒ  | å¤§è§„æ¨¡ä¼ä¸šéƒ¨ç½²     |

---

## 11. æœ¬é¡¹ç›®é›†æˆæ–¹æ¡ˆ

### 11.1 åº”ç”¨åœºæ™¯åˆ†æ

æœ¬é¡¹ç›®ï¼ˆAgentic AI Papers ç ”ç©¶é¡¹ç›®ï¼‰å¯åˆ©ç”¨ Neo4j å®ç°ï¼š

| åœºæ™¯             | ä½¿ç”¨èƒ½åŠ›  | å…·ä½“åº”ç”¨                         |
| ---------------- | --------- | -------------------------------- |
| **è®ºæ–‡çŸ¥è¯†å›¾è°±** | å±æ€§å›¾    | è®ºæ–‡ã€ä½œè€…ã€æœºæ„ã€æ¦‚å¿µçš„å…³ç³»ç½‘ç»œ |
| **å¼•ç”¨ç½‘ç»œåˆ†æ** | GDS ç®—æ³•  | PageRank è¯†åˆ«é‡è¦è®ºæ–‡ã€ç¤¾åŒºæ£€æµ‹  |
| **è¯­ä¹‰æœç´¢**     | å‘é‡ç´¢å¼•  | è®ºæ–‡æ‘˜è¦/å†…å®¹çš„è¯­ä¹‰æ£€ç´¢          |
| **GraphRAG**     | å‘é‡ + å›¾ | åŸºäºçŸ¥è¯†å›¾è°±çš„æ™ºèƒ½é—®ç­”           |

### 11.2 æ¶æ„è®¾è®¡

```mermaid
graph TB
    subgraph "ç”¨æˆ·å±‚"
        U[ç ”ç©¶äººå‘˜/å¼€å‘è€…]
    end

    subgraph "åº”ç”¨å±‚"
        API[REST API]
        RAG[GraphRAG é—®ç­”]
        VIS[å›¾å¯è§†åŒ–]
    end

    subgraph "æ¡†æ¶å±‚"
        LC[LangChain]
        LI[LlamaIndex]
        GDS[GDS ç®—æ³•]
    end

    subgraph "Neo4j"
        direction TB
        P[(Paper èŠ‚ç‚¹)]
        A[(Author èŠ‚ç‚¹)]
        C[(Concept èŠ‚ç‚¹)]
        V[å‘é‡ç´¢å¼•]
    end

    U --> API & RAG & VIS
    API --> P & A & C
    RAG --> LC --> V & P
    VIS --> P & A & C

    P -->|CITED_BY| P
    P -->|AUTHORED_BY| A
    P -->|COVERS| C

    style V fill:#13c2c2,color:#fff
    style P fill:#1890ff,color:#fff
```

### 11.3 æ•°æ®æ¨¡å‹è®¾è®¡

```cypher
// è®ºæ–‡èŠ‚ç‚¹
(:Paper {
  id: STRING,
  title: STRING,
  abstract: TEXT,
  arxiv_id: STRING,
  published_date: DATE,
  embedding: LIST<FLOAT>  // 1536 ç»´å‘é‡
})

// ä½œè€…èŠ‚ç‚¹
(:Author {
  id: STRING,
  name: STRING,
  affiliation: STRING
})

// æ¦‚å¿µèŠ‚ç‚¹
(:Concept {
  id: STRING,
  name: STRING,
  description: STRING
})

// å…³ç³»
(:Paper)-[:AUTHORED_BY {order: INT}]->(:Author)
(:Paper)-[:CITED_BY]->(:Paper)
(:Paper)-[:COVERS {relevance: FLOAT}]->(:Concept)
(:Author)-[:AFFILIATED_WITH]->(:Institution)
```

### 11.4 ä¸ OceanBase äº’è¡¥æ–¹æ¡ˆ

```mermaid
graph LR
    subgraph "OceanBase"
        OB[ç»“æ„åŒ–æ•°æ®<br/>äº‹åŠ¡å¤„ç†<br/>å‘é‡å­˜å‚¨]
    end

    subgraph "Neo4j"
        N4J[çŸ¥è¯†å›¾è°±<br/>å…³ç³»åˆ†æ<br/>å›¾ç®—æ³•]
    end

    subgraph "åº”ç”¨å±‚"
        APP[Agentic AI Engine]
    end

    APP --> OB
    APP --> N4J
    OB <-->|æ•°æ®åŒæ­¥| N4J

    style OB fill:#1890ff,color:#fff
    style N4J fill:#52c41a,color:#fff
```

---

## 12. Demo å®æ–½æŒ‡å¼•

### 12.1 ç¯å¢ƒå‡†å¤‡

#### Docker å¿«é€Ÿå¯åŠ¨

```bash
# æ‹‰å– Neo4j é•œåƒ
docker pull neo4j:5.26.0

# å¯åŠ¨ Neo4j å®¹å™¨
docker run -d \
  --name neo4j-demo \
  -p 7474:7474 \
  -p 7687:7687 \
  -e NEO4J_AUTH=neo4j/your_password \
  -e NEO4J_PLUGINS='["apoc", "graph-data-science"]' \
  -v $HOME/neo4j/data:/data \
  -v $HOME/neo4j/logs:/logs \
  neo4j:5.26.0

# éªŒè¯å¯åŠ¨
curl http://localhost:7474
```

#### Python ç¯å¢ƒ

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv neo4j-env
source neo4j-env/bin/activate

# å®‰è£…ä¾èµ–
pip install neo4j langchain-neo4j neo4j-graphrag openai
```

### 12.2 åŸºç¡€æ•°æ®å¯¼å…¥

```python
from neo4j import GraphDatabase

driver = GraphDatabase.driver(
    "bolt://localhost:7687",
    auth=("neo4j", "your_password")
)

def create_sample_data(tx):
    # åˆ›å»ºçº¦æŸ
    tx.run("CREATE CONSTRAINT paper_id IF NOT EXISTS FOR (p:Paper) REQUIRE p.id IS UNIQUE")
    tx.run("CREATE CONSTRAINT author_id IF NOT EXISTS FOR (a:Author) REQUIRE a.id IS UNIQUE")

    # åˆ›å»ºç¤ºä¾‹è®ºæ–‡
    tx.run("""
        MERGE (p1:Paper {id: 'arxiv:2312.10997'})
        SET p1.title = 'Practices for Governing Agentic AI Systems',
            p1.abstract = 'Agentic AI systems are...',
            p1.published_date = date('2023-12-18')

        MERGE (p2:Paper {id: 'arxiv:2401.00001'})
        SET p2.title = 'Chain-of-Thought Prompting',
            p2.abstract = 'We explore...',
            p2.published_date = date('2024-01-01')

        MERGE (a1:Author {id: 'author-1'})
        SET a1.name = 'John Smith'

        MERGE (p1)-[:AUTHORED_BY]->(a1)
        MERGE (p1)-[:CITED_BY]->(p2)
    """)

with driver.session() as session:
    session.execute_write(create_sample_data)
```

### 12.3 å‘é‡ç´¢å¼•ä¸ RAG

```python
from langchain_neo4j import Neo4jVector
from langchain_openai import OpenAIEmbeddings
import os

os.environ["OPENAI_API_KEY"] = "your-api-key"

# åˆ›å»ºå‘é‡å­˜å‚¨
embeddings = OpenAIEmbeddings(model="text-embedding-3-small")

vector_store = Neo4jVector.from_existing_graph(
    embeddings,
    url="bolt://localhost:7687",
    username="neo4j",
    password="your_password",
    node_label="Paper",
    text_node_properties=["title", "abstract"],
    embedding_node_property="embedding",
    index_name="paper_embeddings"
)

# è¯­ä¹‰æœç´¢
results = vector_store.similarity_search(
    "multi-agent collaboration in AI systems",
    k=5
)

for doc in results:
    print(f"- {doc.page_content[:100]}...")
```

### 12.4 GraphRAG æŸ¥è¯¢

```python
from neo4j_graphrag.retrievers import VectorCypherRetriever
from neo4j_graphrag.generation import GraphRAG
from neo4j_graphrag.llm import OpenAILLM

# åˆ›å»ºæ£€ç´¢å™¨ï¼ˆå‘é‡ + å›¾éå†ï¼‰
retriever = VectorCypherRetriever(
    driver=driver,
    index_name="paper_embeddings",
    retrieval_query="""
        MATCH (paper:Paper)
        WHERE paper.id = node.id
        OPTIONAL MATCH (paper)-[:AUTHORED_BY]->(author:Author)
        OPTIONAL MATCH (paper)-[:CITED_BY]->(cited:Paper)
        RETURN paper.title AS title,
               paper.abstract AS content,
               collect(DISTINCT author.name) AS authors,
               count(cited) AS citation_count
    """,
    embedder=embeddings
)

# åˆ›å»º GraphRAG
llm = OpenAILLM(model_name="gpt-4o-mini")
rag = GraphRAG(retriever=retriever, llm=llm)

# æŸ¥è¯¢
response = rag.search("What are the key components of agentic AI systems?")
print(response.answer)
```

### 12.5 å›¾ç®—æ³•åˆ†æ

```cypher
// æŠ•å½±å¼•ç”¨ç½‘ç»œ
CALL gds.graph.project(
  'citation-network',
  'Paper',
  'CITED_BY'
)

// è®¡ç®— PageRank è¯†åˆ«é‡è¦è®ºæ–‡
CALL gds.pageRank.stream('citation-network')
YIELD nodeId, score
WITH gds.util.asNode(nodeId) AS paper, score
RETURN paper.title, score
ORDER BY score DESC
LIMIT 10

// ç¤¾åŒºæ£€æµ‹
CALL gds.louvain.stream('citation-network')
YIELD nodeId, communityId
WITH gds.util.asNode(nodeId) AS paper, communityId
RETURN communityId, collect(paper.title) AS papers
ORDER BY size(papers) DESC
```

### 12.6 éªŒè¯æ£€æŸ¥æ¸…å•

| æ£€æŸ¥é¡¹            | éªŒè¯æ–¹æ³•                    |
| ----------------- | --------------------------- |
| âœ… Neo4j æœåŠ¡å¯åŠ¨ | è®¿é—® http://localhost:7474  |
| âœ… æ•°æ®å¯¼å…¥æˆåŠŸ   | `MATCH (n) RETURN count(n)` |
| âœ… å‘é‡ç´¢å¼•åˆ›å»º   | `SHOW INDEXES`              |
| âœ… è¯­ä¹‰æœç´¢å·¥ä½œ   | æ‰§è¡Œç›¸ä¼¼æ€§æŸ¥è¯¢              |
| âœ… å›¾éå†æ­£å¸¸     | æ‰§è¡Œè·¯å¾„æŸ¥è¯¢                |
| âœ… GDS ç®—æ³•å¯ç”¨   | `CALL gds.list()`           |

---

## References

## References

<a id="ref1"></a>**[1]** Neo4j. (2025). _Introduction - Operations Manual_. [https://neo4j.com/docs/operations-manual/current/introduction/](https://neo4j.com/docs/operations-manual/current/introduction/)

<a id="ref2"></a>**[2]** Neo4j. _What is a graph database - Getting Started_. [https://neo4j.com/docs/getting-started/graph-database/](https://neo4j.com/docs/getting-started/graph-database/)

<a id="ref3"></a>**[3]** Neo4j. _Database internals and transactional behavior_. [https://neo4j.com/docs/operations-manual/current/database-internals/](https://neo4j.com/docs/operations-manual/current/database-internals/)

<a id="ref4"></a>**[4]** Neo4j. _Graph database concepts - Getting Started_. [https://neo4j.com/docs/getting-started/appendix/graphdb-concepts/](https://neo4j.com/docs/getting-started/appendix/graphdb-concepts/)

<a id="ref5"></a>**[5]** Neo4j. _Performance - Operations Manual_. [https://neo4j.com/docs/operations-manual/current/performance/](https://neo4j.com/docs/operations-manual/current/performance/)

<a id="ref6"></a>**[6]** Neo4j. _What is Cypher - Getting Started_. [https://neo4j.com/docs/getting-started/cypher/](https://neo4j.com/docs/getting-started/cypher/)

<a id="ref7"></a>**[7]** Neo4j. _Introduction - Cypher Manual_. [https://neo4j.com/docs/cypher-manual/current/introduction/](https://neo4j.com/docs/cypher-manual/current/introduction/)

<a id="ref8"></a>**[8]** Neo4j. _What is graph data modeling? - Getting Started_. [https://neo4j.com/docs/getting-started/data-modeling/](https://neo4j.com/docs/getting-started/data-modeling/)

<a id="ref9"></a>**[9]** Neo4j. _Indexes - Cypher Manual_. [https://neo4j.com/docs/cypher-manual/current/indexes/](https://neo4j.com/docs/cypher-manual/current/indexes/)

<a id="ref10"></a>**[10]** Neo4j. _Constraints - Cypher Manual_. [https://neo4j.com/docs/cypher-manual/current/constraints/](https://neo4j.com/docs/cypher-manual/current/constraints/)

<a id="ref11"></a>**[11]** Neo4j. _Authentication and authorization - Operations Manual_. [https://neo4j.com/docs/operations-manual/current/authentication-authorization/](https://neo4j.com/docs/operations-manual/current/authentication-authorization/)

<a id="ref12"></a>**[12]** Neo4j. _Clustering - Operations Manual_. [https://neo4j.com/docs/operations-manual/current/clustering/](https://neo4j.com/docs/operations-manual/current/clustering/)

<a id="ref13"></a>**[13]** Neo4j. _Vector indexes - Cypher Manual_. [https://neo4j.com/docs/cypher-manual/current/indexes/semantic-indexes/vector-indexes/](https://neo4j.com/docs/cypher-manual/current/indexes/semantic-indexes/vector-indexes/)

<a id="ref14"></a>**[14]** Neo4j. _Embeddings & Vector Indexes Tutorial_. [https://neo4j.com/docs/genai/tutorials/embeddings-vector-indexes/](https://neo4j.com/docs/genai/tutorials/embeddings-vector-indexes/)

<a id="ref15"></a>**[15]** Neo4j. _Neo4j GenAI Documentation_. [https://neo4j.com/docs/genai/](https://neo4j.com/docs/genai/)

<a id="ref16"></a>**[16]** Neo4j. _Introduction - Neo4j Graph Data Science_. [https://neo4j.com/docs/graph-data-science/current/introduction/](https://neo4j.com/docs/graph-data-science/current/introduction/)

<a id="ref17"></a>**[17]** Neo4j. _LangChain Neo4j Integration - Neo4j Labs_. [https://neo4j.com/labs/genai-ecosystem/langchain/](https://neo4j.com/labs/genai-ecosystem/langchain/)

<a id="ref18"></a>**[18]** Neo4j. _LlamaIndex - Neo4j Labs_. [https://neo4j.com/labs/genai-ecosystem/llamaindex/](https://neo4j.com/labs/genai-ecosystem/llamaindex/)

<a id="ref19"></a>**[19]** Neo4j. _GraphRAG for Python Documentation_. [https://neo4j.com/docs/neo4j-graphrag-python/current/](https://neo4j.com/docs/neo4j-graphrag-python/current/)

<a id="ref20"></a>**[20]** Neo4j. _APOC Core Documentation_. [https://neo4j.com/docs/apoc/current/](https://neo4j.com/docs/apoc/current/)

<a id="ref21"></a>**[21]** Neo4j. _Installation - Operations Manual_. [https://neo4j.com/docs/operations-manual/current/installation/](https://neo4j.com/docs/operations-manual/current/installation/)

<a id="ref22"></a>**[22]** Neo4j. _Neo4j Aura Documentation_. [https://neo4j.com/docs/aura/](https://neo4j.com/docs/aura/)

<a id="ref23"></a>**[23]** Neo4j. _Build applications with Neo4j and Python_. [https://neo4j.com/docs/python-manual/current/](https://neo4j.com/docs/python-manual/current/)

<a id="ref24"></a>**[24]** Neo4j. _Graph algorithms - Neo4j Graph Data Science_. [https://neo4j.com/docs/graph-data-science/current/algorithms/](https://neo4j.com/docs/graph-data-science/current/algorithms/)

<a id="ref25"></a>**[25]** Neo4j. _Backup and restore - Operations Manual_. [https://neo4j.com/docs/operations-manual/current/backup-restore/](https://neo4j.com/docs/operations-manual/current/backup-restore/)
